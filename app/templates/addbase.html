<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
	{% import "bootstrap/wtf.html" as wtf %}
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>添加base</title>
<link href="/static/css/bootstrap.min.css" rel="stylesheet" />
<script src="/static/js/jquery-3.2.1.min.js" type="text/javascript"></script>
<script src="/static/js/bootstrap.min.js" type="text/javascript"></script>
<style type="text/css">
	.content{
		margin:2% 8%;
		overflow:hidden;
	}
	.right-float{
		float:right;
	}
	.nav-text{
		font-size:1.1em;
	}
	.nav-a{
		padding:15px 8px !important;
	}
	.container{
		margin:0 8%;
		padding:0 0;
	}
	.config-btn{
		border:0;
		padding:0;
	}
</style>
</head>

<body>
<nav class="navbar navbar-default ">
  <div class="container">
    <!-- Brand and toggle get grouped for better mobile display -->
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand nav-text" href="/">Brand</a>
    </div>

    <!-- Collect the nav links, forms, and other content for toggling -->
    <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
      <ul class="nav navbar-nav">
		  <li class="nav-text"><a class="nav-a" href="{{url_for('main.page_index')}}">首页</a></li>
      </ul>
	  <ul class="nav navbar-nav right-float">
		  {% if current_user.is_authenticated %}
		  <li class=""><a href="{{url_for('auth.logout')}}">退出登录</a></li>
		{%else %}
        <li class=""><a href="#">登录</a></li>
		{%endif%}
      </ul>
    </div><!-- /.navbar-collapse -->
  </div><!-- /.container-fluid -->
</nav>

<div>
	{% for message in get_flashed_messages() %}
	<div class="alert alert-warning">
		{{message}}
	</div>
	{% endfor %}
</div>
<div class="content">
	<form class="form-horizontal" method="post" action="/addbase" onsubmit="return validate_bs_name()">
			  <fieldset>
			  <legend>基站模块</legend>
			  <div class="form-group">
				<label for="1" class="col-sm-2 control-label">基站编号</label>
				<div class="col-sm-3">
                    <input type="text" class="form-control" placeholder="请输入基站编号"  id="ent_bs_name" name="bs_name"  />
				</div>
                  <p id="ent_bs_nameErrors" style="color: #d43f3a"></p>
			  </div>

			  <div class="form-group">
				<label for="2" class="col-sm-2 control-label">基站IP1</label>
				<div  class="col-sm-3">
                    <input type="text" class="form-control" name="BSIP1" id="2" value="192.168.1.1" />
				</div>
                  <span id="s2"></span>
			  </div>

                  <div class="form-group">
				    <label for="3" class="col-sm-2 control-label">端口号1</label>
				    <div id="d1" class="col-sm-3">
				     <input type="text" class="form-control" name="BSPort1" id="3"  value="8080"  />
                    </div>
                      <span class="" id="s3" ></span>
                  </div>

                  <div class="form-group">
				<label for="4" class="col-sm-2 control-label">基站IP2</label>
				<div  class="col-sm-3">
				  <input type="text" class="form-control" name="BSIP2" id="4" value="192.168.255.255"  />
				</div>
                      <span id="s4"></span>
			  </div>
			  <div class="form-group">
				<label for="5" class="col-sm-2 control-label">端口号2</label>
				<div id="d1" class="col-sm-3">
				  <input type="text" class="form-control" name="BSPort2" id="5"  value="8000" />
				</div>
                  <span id="s5" ></span>
			  </div>
			  <div class="form-group">
				<label for="6" class="col-sm-2 control-label">上行子帧时间</label>
				<div class="col-sm-3">
                    <select class="form-control" name="ulPacketTime" id="6">
                      <option value="10">10</option>
                      <option value="15" selected>15</option>
                      <option value="30">30</option>
                    </select>
				</div>
                  <span id="s6"></span>
			  </div>
			  <div class="form-group">
				<label for="7" class="col-sm-2 control-label">上行子帧数目</label>
				<div class="col-sm-3">
                    <select class="form-control" name="ulPacketNum" id="7">
                      <option value="10">10</option>
                      <option value="15" selected>15</option>
                      <option value="30">30</option>
                    </select>
				</div>
                  <span id="ssx"></span>
			  </div>
			  <div class="form-group">
				<label for="8" class="col-sm-2 control-label">上行竞争时间</label>
				<div class="col-sm-3">
                    <select class="form-control" name="ulCompetitionSectionTime" id="8">
                      <option value="1">10</option>
                      <option value="2" selected>15</option>
                      <option value="3">30</option>
                    </select>
				</div>
                  <span id="ssx"></span>
			  </div>
              <div class="form-group">
				<label for="9" class="col-sm-2 control-label">下行子帧时间</label>
				<div class="col-sm-3">
				  <select class="form-control" name="dlPacketTime" id="9">
                      <option value="1">1</option>
                      <option value="2" selected>2</option>
                      <option value="3">3</option>
                  </select>
				</div>
                  <span id="ssx"></span>
			  </div>

              <div class="form-group">
				<label for="10" class="col-sm-2 control-label">下行子帧数目</label>
				<div class="col-sm-3">
                    <select class="form-control" name="dlLogicSubFrameNum" id="10">
                      <option value="1">10</option>
                      <option value="2" selected>20</option>
                      <option value="3">30</option>
                    </select>
				</div>
                  <span id="ssx"></span>
			  </div>
              <div class="form-group">
				<label for="11" class="col-sm-2 control-label">下行子帧序号</label>
				<div class="col-sm-3">
                    <select class="form-control" name="dlLogicSubFrameIdx" id="11">
                      <option value="1">10</option>
                      <option value="2" selected>15</option>
                      <option value="3">30</option>
                    </select>
				</div>
                  <span id="ssx"></span>
			  </div>

			  <div class="form-group">
				<div class="col-sm-offset-2 col-sm-2">
				  <button id="submitform" type="submit" class="btn btn-default form-control">提交</button>
				</div>
			  </div>
			  </fieldset>
		  </form>
	<div id="resultDiv"></div>
</div>
</body>
<script type="text/javascript">
    var flag_g = false;
    function setmessage(index, message) {
        $("#"+index+"Errors").html("<span id=\"" + index+ ".errors\">"+message+"</span>");
    }
    function validate_bs_name() {
        var ent_bs_name =$.trim($("#ent_bs_name").val());
        if(ent_bs_name=="")
        {
            $("#ent_bs_name").attr("placeholder", "请输入基站编号");
            $('html,body').animate({scrollTop:$("#ent_bs_name").offset().top}, 200);
            setmessage("ent_bs_name","不能为空");
            return false;
        }
        $("#ent_bs_nameErrors").empty();
        $.ajaxSettings.async = false;
        $.post("/addbase/addbase_datacheck", {bs_name: ent_bs_name}, function (data, status) {
            if(status=="success")
            {
{#                alert(data);#}
                if(data=="existed")
                {
{#                    alert("xxxxx");#}
                    setmessage("ent_bs_name","该编号已存在!");
                    flag_g = false;
                }
                else{
                    flag_g = true;
                }
            }
        });
        $.ajaxSettings.async=true;
        return flag_g;
    }
</script>
</html>
